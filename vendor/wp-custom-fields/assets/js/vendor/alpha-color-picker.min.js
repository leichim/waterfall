!function(i){function a(i){var a;return i=i.replace(/ /g,""),i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(a=100*parseFloat(i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),a=parseInt(a)):a=100,a}function r(i,a,r,e){var n,o,l;n=a.data("a8cIris"),o=a.data("wpWpColorPicker"),n._color._alpha=i,l=n._color.toString(),a.val(l),o.toggler.css({"background-color":l}),e&&t(i,r),a.wpColorPicker("color",l)}function t(i,a){a.slider("value",i),a.find(".ui-slider-handle").text(i.toString())}Color.prototype.toString=function(i){if("no-alpha"==i)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(a.length<6)for(var r=6-a.length-1;r>=0;r--)a="0"+a;return"#"+a},i.fn.alphaColorPicker=function(){return this.each(function(){var e,n,o,l,c,s,d,p,f,u,h;e=i(this),e.wrap('<div class="alpha-color-picker-wrap"></div>'),o=e.attr("data-palette")||"true",l=e.attr("data-show-opacity")||"true",c=e.attr("data-default-color")||"",s=-1!==o.indexOf("|")?o.split("|"):"false"==o?!1:!0,n=e.val().replace(/\s+/g,""),""==n&&(n=c),d={change:function(i,r){var t,n,o,l;t=e.attr("data-customize-setting-link"),n=e.wpColorPicker("color"),c==n&&(o=a(n),f.find(".ui-slider-handle").text(o)),"undefined"!=typeof wp.customize&&wp.customize(t,function(i){i.set(n)}),l=p.find(".transparency"),l.css("background-color",r.color.toString("no-alpha"))},palettes:s},e.wpColorPicker(d),p=e.parents(".wp-picker-container:first"),i('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(p.find(".wp-picker-holder")),f=p.find(".alpha-slider"),u=a(n),h={create:function(a,r){var t=i(this).slider("value");i(this).find(".ui-slider-handle").text(t),i(this).siblings(".transparency ").css("background-color",n)},value:u,range:"max",step:1,min:0,max:100,animate:300},f.slider(h),"true"==l&&f.find(".ui-slider-handle").addClass("show-opacity"),p.find(".min-click-zone").on("click",function(){r(0,e,f,!0)}),p.find(".max-click-zone").on("click",function(){r(100,e,f,!0)}),p.find(".iris-palette").on("click",function(){var r,n;r=i(this).css("background-color"),n=a(r),t(n,f),100!=n&&(r=r.replace(/[^,]+(?=\))/,(n/100).toFixed(2))),e.wpColorPicker("color",r)}),p.find(".button.wp-picker-default").on("click",function(){var i=a(c);t(i,f)}),e.on("input",function(){var r=i(this).val(),e=a(r);t(e,f)}),f.slider().on("slide",function(a,t){var n=parseFloat(t.value)/100;r(n,e,f,!1),i(this).find(".ui-slider-handle").text(t.value)})})}}(jQuery);